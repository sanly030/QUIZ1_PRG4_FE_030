<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KASIR SEDERHANA</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        body {
            background-color: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 2rem 0;
        }
        .card {
            max-width: 500px;
            width: 100%;
        }
        .btn-submit {
            background-color: #8A2BE2;
            color: white;
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="card">
            <div class="card-header text-center">
                <h2 class="mb-0">FORM KASIR</h2>
            </div>
            <div class="card-body">
                <form id="kasirForm">
                    <div class="form-section">
                        <div class="mb-3">
                            <label for="nama" class="form-label">Nama Customer</label>
                            <input type="text" class="form-control" id="nama" name="nama" placeholder="Masukkan nama" required />
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Status Customer</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="status" id="statusNonMember" value="Non-Member" required checked/>
                                <label class="form-check-label" for="statusNonMember"> Non-Member </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="status" id="statusMember" value="Member" />
                                <label class="form-check-label" for="statusMember"> Member (Diskon 5%) </label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="barang" class="form-label">Pilih Barang</label>
                            <select class="form-select" id="barang" name="barang" required>
                                <option value="" disabled selected>Pilih...</option>
                                <option value="Pensil">Pensil</option>
                                <option value="Buku">Buku</option>
                                <option value="Ballpoint">Ballpoint</option>
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label for="harga" class="form-label">Harga Satuan</label>
                            <input type="number" class="form-control" id="harga" name="harga" placeholder="Masukkan harga" required />
                        </div>

                        <div class="mb-3">
                            <label for="jumlah" class="form-label">Jumlah</label>
                            <input type="number" class="form-control" id="jumlah" name="jumlah" min="1" value="1" required />
                        </div>

                        <div class="mb-3">
                            <label for="subTotal" class="form-label">Sub Total</label>
                            <input type="text" class="form-control" id="subTotal" name="subTotal" disabled/>
                        </div>

                        <div class="mb-3">
                            <label for="diskon" class="form-label">Diskon</label>
                            <input type="text" class="form-control" id="diskon" name="diskon" disabled/>
                        </div>

                        <div class="mb-3">
                            <label for="total" class="form-label">Total</label>
                            <input type="text" class="form-control" id="total" name="total" disabled/>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-submit w-100 py-2">
                        Simpan Transaksi
                    </button>
                </form>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Get form elements
            const form = document.getElementById('kasirForm');
            const namaInput = document.getElementById('nama');
            const barangSelect = document.getElementById('barang');
            const hargaInput = document.getElementById('harga');
            const jumlahInput = document.getElementById('jumlah');
            const statusRadios = document.querySelectorAll('input[name="status"]');
            const subTotalInput = document.getElementById('subTotal');
            const diskonInput = document.getElementById('diskon');
            const totalInput = document.getElementById('total');

            // Function to calculate and update totals
            function calculateTotal() {
                // Ambil nilai harga langsung dari inputan user
                const harga = parseFloat(hargaInput.value) || 0;
                const jumlah = parseInt(jumlahInput.value) || 0;
                const status = document.querySelector('input[name="status"]:checked').value;
                
                // Cek jika harga atau jumlah belum diisi
                if (harga === 0 || jumlah < 1) {
                    subTotalInput.value = '';
                    diskonInput.value = '';
                    totalInput.value = '';
                    return;
                }

                const subTotal = harga * jumlah;
                let diskon = 0;

                if (status === 'Member') {
                    diskon = subTotal * 0.05; // 5% discount
                }

                const total = subTotal - diskon;

                // Tampilkan nilai yang sudah diformat
                subTotalInput.value = 'Rp ' + subTotal.toLocaleString('id-ID');
                diskonInput.value = 'Rp ' + diskon.toLocaleString('id-ID');
                totalInput.value = 'Rp ' + total.toLocaleString('id-ID');
            }

            // Tambahkan event listener untuk semua input yang mempengaruhi total
            hargaInput.addEventListener('input', calculateTotal);
            jumlahInput.addEventListener('input', calculateTotal);
            statusRadios.forEach(radio => {
                radio.addEventListener('change', calculateTotal);
            });
            barangSelect.addEventListener('change', calculateTotal);

            // Event listener untuk form submission
            form.addEventListener('submit', function (e) {
                e.preventDefault(); // Mencegah halaman reload

                // c. Validasi bahwa seluruh inputan wajib diisi
                const nama = namaInput.value.trim();
                const barang = barangSelect.value;
                const harga = hargaInput.value;
                
                if (!nama || !barang || !harga) {
                    alert('Validasi Gagal! Mohon isi semua kolom yang wajib diisi.');
                    return; // Hentikan proses jika validasi gagal
                }

                const totalValue = totalInput.value;
                alert(`Transaksi untuk ${nama} sebesar ${totalValue} berhasil disimpan!`);

                // d. Reset halaman web menjadi keadaan semua (kosong)
                form.reset(); // Mereset semua input form standar

                // Mengosongkan field disabled secara manual
                subTotalInput.value = '';
                diskonInput.value = '';
                totalInput.value = '';
            });
        });
    </script>
</body>
</html>